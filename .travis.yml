language: python

python:
  - "2.7"

cache:
  directories:
    - $HOME/.pip-cache

services:
  - elasticsearch
  - postgresql

env:
  global:
    - DJANGO_SETTINGS_MODULE=langerak_gkv.conf.travis
    - SECRET_KEY=travis

install:
  - pip install --upgrade setuptools pip
  - pip install -r requirements/test.txt --cache-dir $HOME/.pip-cache
  - npm install

before_script:
  - mkdir log
  - src/manage.py collectstatic --noinput --link

script:
  - coverage run src/manage.py test src -v 2

after_success:
  - coveralls
  - codecov
